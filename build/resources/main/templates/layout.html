<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title} + ' - Commerce Demo'">Commerce Demo</title>

    <!-- Styles -->
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <!-- PortOne SDK (v2) -->
    <script src="https://cdn.portone.io/v2/browser-sdk.js"></script>

    <!-- Common Scripts -->
    <script th:src="@{/js/app-config.js}"></script>
    <script th:src="@{/js/api-handler.js}"></script>
    <script th:src="@{/js/theme.js}"></script>
    <script th:src="@{/js/portone-sdk.js}"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-brand">
                <span>üè™ CommerceHub</span>
            </a>

            <ul class="navbar-nav">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="/pages/shop" class="nav-link">Shop</a></li>
                <li><a href="/pages/orders" class="nav-link">Orders</a></li>
                <li><a href="/pages/plans" class="nav-link">Plans</a></li>
                <li><a href="/pages/subscribe" class="nav-link">Subscribe</a></li>
                <li><a href="/pages/subscriptions" class="nav-link">Subscriptions</a></li>
                <li><a href="/config" class="nav-link">Config</a></li>
            </ul>

            <div class="navbar-actions">
                <div class="config-badge-container">
                    <span class="config-badge skeleton" style="width: 100px; height: 24px;"></span>
                </div>
                <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container (2-Column Layout) -->
    <div class="main-container">
        <!-- Left: Page Content -->
        <div class="content-area">
            <div th:replace="${content}"></div>
        </div>

        <!-- Right: API Panel -->
        <div class="api-panel">
            <div class="panel-section">
                <h3 class="panel-title">üì° Current Endpoint</h3>
                <div id="current-endpoint" class="endpoint-badge">
                    No request yet
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-title">üì§ Request</h3>
                <div class="form-group">
                    <label class="form-label">Method</label>
                    <select id="request-method" class="form-select">
                        <option value="GET">GET</option>
                        <option value="POST" selected>POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Custom URL (optional)</label>
                    <input type="text" id="custom-endpoint" class="form-input" placeholder="http://localhost:8080/api/...">
                </div>
                <label class="form-label">Body (JSON)</label>
                <textarea id="request-body" class="api-textarea" placeholder='{\n  "example": "data"\n}'></textarea>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="sendCustomRequest()">Send Custom</button>
                    <button class="btn btn-outline" onclick="clearResponse()">Clear</button>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-title">üì• Response</h3>
                <pre id="response-output" class="response-box">Waiting for request...</pre>
            </div>
        </div>
    </div>

    <!-- Page-specific scripts -->
    <th:block th:if="${pageScript}">
        <script th:src="@{${pageScript}}"></script>
    </th:block>
</body>
</html>
